<!doctype html><html lang="zh-CN"><head><meta charset="utf-8" /><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="generator" content="VuePress 2.0.0-rc.12" /><meta name="theme" content="VuePress Theme Plume 1.0.0-rc.61" /><script id="check-dark-mode">;(function () {const um= localStorage.getItem('vuepress-theme-appearance') || 'auto';const sm = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;if (um === 'dark' || (um !== 'light' && sm)) {document.documentElement.classList.add('dark');}})();</script><script id="check-mac-os">document.documentElement.classList.toggle('mac', /Mac|iPhone|iPod|iPad/i.test(navigator.platform))</script><link rel="icon" href="https://plume.pengzhanbo.cn/plume.png"><title>10.垃圾回收与内存泄漏</title><meta name="description" content=""><link rel="preload" href="/assets/style-CWiYzZzK.css" as="style"><link rel="stylesheet" href="/assets/style-CWiYzZzK.css"><link rel="modulepreload" href="/assets/app-0O5GHy7n.js"><link rel="modulepreload" href="/assets/index.html-BWyG_-Ni.js"><link rel="prefetch" href="/assets/index.html-CvtSSboY.js" as="script"><link rel="prefetch" href="/assets/index.html-DcfxzHjW.js" as="script"><link rel="prefetch" href="/assets/index.html-C69jWtsN.js" as="script"><link rel="prefetch" href="/assets/index.html-Ci1XvmxI.js" as="script"><link rel="prefetch" href="/assets/index.html-_s0_1O0p.js" as="script"><link rel="prefetch" href="/assets/index.html-BJSrfkrX.js" as="script"><link rel="prefetch" href="/assets/index.html-JXsqOyu-.js" as="script"><link rel="prefetch" href="/assets/index.html-BIOGvU-l.js" as="script"><link rel="prefetch" href="/assets/index.html-CUepJNAC.js" as="script"><link rel="prefetch" href="/assets/index.html-B32PyVPp.js" as="script"><link rel="prefetch" href="/assets/index.html-BukLUQ60.js" as="script"><link rel="prefetch" href="/assets/index.html-A7HGjBbk.js" as="script"><link rel="prefetch" href="/assets/index.html-CpjM7idi.js" as="script"><link rel="prefetch" href="/assets/index.html-D5DAYXw8.js" as="script"><link rel="prefetch" href="/assets/index.html-YAJ4mySS.js" as="script"><link rel="prefetch" href="/assets/index.html-DAbUNJp6.js" as="script"><link rel="prefetch" href="/assets/index.html-WJAr2al7.js" as="script"><link rel="prefetch" href="/assets/index.html-B5aHG8_7.js" as="script"><link rel="prefetch" href="/assets/index.html-Cmbv2lRT.js" as="script"><link rel="prefetch" href="/assets/index.html-D7XHZhZ-.js" as="script"><link rel="prefetch" href="/assets/index.html-QYQccAlM.js" as="script"><link rel="prefetch" href="/assets/index.html-CHLwddVF.js" as="script"><link rel="prefetch" href="/assets/index.html-BtJFYKNV.js" as="script"><link rel="prefetch" href="/assets/index.html-4WuX6lUM.js" as="script"><link rel="prefetch" href="/assets/index.html-D_cMbTMf.js" as="script"><link rel="prefetch" href="/assets/index.html-BpyM6Cn2.js" as="script"><link rel="prefetch" href="/assets/index.html-DxR7K4QH.js" as="script"><link rel="prefetch" href="/assets/index.html-C39YflDW.js" as="script"><link rel="prefetch" href="/assets/index.html-C3qBuwds.js" as="script"><link rel="prefetch" href="/assets/index.html-CZiOqRsQ.js" as="script"><link rel="prefetch" href="/assets/index.html-DrP-g0am.js" as="script"><link rel="prefetch" href="/assets/index.html-UhPFnXr1.js" as="script"><link rel="prefetch" href="/assets/index.html-BZZJ4oaZ.js" as="script"><link rel="prefetch" href="/assets/index.html-BO_eG8EE.js" as="script"><link rel="prefetch" href="/assets/index.html-D2EeVjRZ.js" as="script"><link rel="prefetch" href="/assets/index.html-Bt9I2YMk.js" as="script"><link rel="prefetch" href="/assets/index.html-CgWwhbzw.js" as="script"><link rel="prefetch" href="/assets/index.html-DUsivFB1.js" as="script"><link rel="prefetch" href="/assets/index.html-DJvIOoKf.js" as="script"><link rel="prefetch" href="/assets/index.html-pg2OtY7x.js" as="script"><link rel="prefetch" href="/assets/index.html-B0H2Nrqu.js" as="script"><link rel="prefetch" href="/assets/index.html-CyQVHaMP.js" as="script"><link rel="prefetch" href="/assets/index.html-B0uXfogB.js" as="script"><link rel="prefetch" href="/assets/index.html-DqGsDAAt.js" as="script"><link rel="prefetch" href="/assets/index.html-CgEgQ8uq.js" as="script"><link rel="prefetch" href="/assets/index.html-mrwjD0H-.js" as="script"><link rel="prefetch" href="/assets/index.html-C3mZN2WU.js" as="script"><link rel="prefetch" href="/assets/index.html-J6oZKF6_.js" as="script"><link rel="prefetch" href="/assets/index.html-DuzyKwr1.js" as="script"><link rel="prefetch" href="/assets/index.html-D41j1L_c.js" as="script"><link rel="prefetch" href="/assets/index.html-DLBu8TZ7.js" as="script"><link rel="prefetch" href="/assets/index.html-ClikBUPj.js" as="script"><link rel="prefetch" href="/assets/index.html-DjRSisXT.js" as="script"><link rel="prefetch" href="/assets/index.html-MB0jncIz.js" as="script"><link rel="prefetch" href="/assets/index.html-tijk_hC3.js" as="script"><link rel="prefetch" href="/assets/index.html-DFeY8gIG.js" as="script"><link rel="prefetch" href="/assets/index.html-BCW9gPqE.js" as="script"><link rel="prefetch" href="/assets/index.html-BjtrtWfK.js" as="script"><link rel="prefetch" href="/assets/index.html-DkI-8KPj.js" as="script"><link rel="prefetch" href="/assets/index.html-22dVrj4x.js" as="script"><link rel="prefetch" href="/assets/index.html-CWOUYGKs.js" as="script"><link rel="prefetch" href="/assets/index.html-DYMutGuZ.js" as="script"><link rel="prefetch" href="/assets/index.html-BzDuWNAl.js" as="script"><link rel="prefetch" href="/assets/index.html-CxEHhwts.js" as="script"><link rel="prefetch" href="/assets/index.html-Ca3MX-PC.js" as="script"><link rel="prefetch" href="/assets/index.html-oIVZh5ry.js" as="script"><link rel="prefetch" href="/assets/index.html-DunMPpXG.js" as="script"><link rel="prefetch" href="/assets/index.html-BBDjpCZE.js" as="script"><link rel="prefetch" href="/assets/index.html-Bx6UWyZQ.js" as="script"><link rel="prefetch" href="/assets/index.html-C8rK4hPF.js" as="script"><link rel="prefetch" href="/assets/index.html-CiGGZ7Cx.js" as="script"><link rel="prefetch" href="/assets/index.html-CnnDFNzd.js" as="script"><link rel="prefetch" href="/assets/index.html-gskxA_0G.js" as="script"><link rel="prefetch" href="/assets/index.html-C6xaClkL.js" as="script"><link rel="prefetch" href="/assets/index.html-C7PJn9RD.js" as="script"><link rel="prefetch" href="/assets/index.html-VOunMStS.js" as="script"><link rel="prefetch" href="/assets/index.html-Xa0NJGDt.js" as="script"><link rel="prefetch" href="/assets/index.html-D4NzyML9.js" as="script"><link rel="prefetch" href="/assets/index.html-DFajwc_a.js" as="script"><link rel="prefetch" href="/assets/index.html-ubbUtzs6.js" as="script"><link rel="prefetch" href="/assets/index.html-CqMhFmV1.js" as="script"><link rel="prefetch" href="/assets/index.html-ByIZU7gS.js" as="script"><link rel="prefetch" href="/assets/index.html-oe3BxuJ3.js" as="script"><link rel="prefetch" href="/assets/index.html-hoieJx6J.js" as="script"><link rel="prefetch" href="/assets/index.html-Djte5QF3.js" as="script"><link rel="prefetch" href="/assets/index.html-BhQF4UaE.js" as="script"><link rel="prefetch" href="/assets/index.html-0zJ4tl7B.js" as="script"><link rel="prefetch" href="/assets/index.html-DM-P5eR3.js" as="script"><link rel="prefetch" href="/assets/index.html-pVZjX5gs.js" as="script"><link rel="prefetch" href="/assets/index.html-DmE6raJf.js" as="script"><link rel="prefetch" href="/assets/index.html-B40EZPcP.js" as="script"><link rel="prefetch" href="/assets/404.html-Breeaa0H.js" as="script"><link rel="prefetch" href="/assets/index.html-BL6HD9LM.js" as="script"><link rel="prefetch" href="/assets/index.html-DOo_j7Ek.js" as="script"><link rel="prefetch" href="/assets/index.html-Ctgr2TXa.js" as="script"><link rel="prefetch" href="/assets/SearchBox-Br5E6a1q.js" as="script"></head><body><div id="app"><!--[--><div class="theme-plume" data-v-787f3e07><!--[--><!--[--><span tabindex="-1" data-v-b64e95c9></span><a href="#LayoutContent" class="skip-link visually-hidden" data-v-b64e95c9> Skip to content </a><!--]--><!----><div class="nav-wrapper" data-v-787f3e07 data-v-996df37e><div class="navbar-wrapper has-sidebar" data-v-996df37e data-v-b90f6f00><div class="container" data-v-b90f6f00><div class="title" data-v-b90f6f00><div class="navbar-title has-sidebar" data-v-b90f6f00 data-v-186be6d6><a class="auto-link link title" href="/" data-v-186be6d6 data-v-627b18c0><!--[--><!----> <!--]--><!----></a></div></div><div class="content" data-v-b90f6f00><div class="curtain" data-v-b90f6f00></div><div class="content-body" data-v-b90f6f00><div class="navbar-search search" data-v-b90f6f00><div class="search-wrapper" data-v-71bdae5f><!----><div id="local-search" data-v-71bdae5f><button type="button" class="mini-search mini-search-button" aria-label="搜索文档" data-v-71bdae5f><span class="mini-search-button-container"><svg class="mini-search-search-icon" width="20" height="20" viewBox="0 0 20 20" aria-label="search icon"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="mini-search-button-placeholder">搜索文档</span></span><span class="mini-search-button-keys"><kbd class="mini-search-button-key"></kbd><kbd class="mini-search-button-key">K</kbd></span></button></div></div></div><nav aria-labelledby="main-nav-aria-label" class="navbar-menu menu" data-v-b90f6f00 data-v-6283f876><span id="main-nav-aria-label" class="visually-hidden" data-v-6283f876>Main Navigation</span><!--[--><!--[--><a class="auto-link link navbar-menu-link" href="/" data-v-6283f876 data-v-273e8244 data-v-627b18c0><!--[--><!----><i data-v-273e8244>Home</i><!--]--><!----></a><!--]--><!--[--><div class="flyout-wrapper navbar-menu-group active" data-v-6283f876 data-v-09d7116b><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-09d7116b><span class="text" data-v-09d7116b><!----><!----><span data-v-09d7116b>Re-learning</span><span class="vpi-chevron-down text-icon" data-v-09d7116b></span></span></button><div class="menu" data-v-09d7116b><div class="menu-wrapper" data-v-09d7116b data-v-5a8eb3de><div class="items" data-v-5a8eb3de><!--[--><!--[--><div class="menu-link" data-v-5a8eb3de data-v-95ebb6bf><a class="auto-link link" href="/notes/Re-learning/JavaScript/kjla8iv9/" data-v-95ebb6bf data-v-627b18c0><!--[--><!----><i data-v-95ebb6bf>JavaScript</i><!--]--><!----></a></div><!--]--><!--[--><div class="menu-link" data-v-5a8eb3de data-v-95ebb6bf><a class="auto-link link" href="/notes/Re-learning/Tool-chain/h6vf574e/" data-v-95ebb6bf data-v-627b18c0><!--[--><!----><i data-v-95ebb6bf>Tool-chain</i><!--]--><!----></a></div><!--]--><!--[--><div class="menu-link" data-v-5a8eb3de data-v-95ebb6bf><a class="auto-link link" href="/notes/Re-learning/TypeScript/dn7e6iox/" data-v-95ebb6bf data-v-627b18c0><!--[--><!----><i data-v-95ebb6bf>TypeScript</i><!--]--><!----></a></div><!--]--><!--[--><div class="menu-link" data-v-5a8eb3de data-v-95ebb6bf><a class="auto-link link" href="/article/dd2ouxgd/" data-v-95ebb6bf data-v-627b18c0><!--[--><!----><i data-v-95ebb6bf>devRecord</i><!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="flyout-wrapper navbar-menu-group" data-v-6283f876 data-v-09d7116b><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-09d7116b><span class="text" data-v-09d7116b><!----><!----><span data-v-09d7116b>books</span><span class="vpi-chevron-down text-icon" data-v-09d7116b></span></span></button><div class="menu" data-v-09d7116b><div class="menu-wrapper" data-v-09d7116b data-v-5a8eb3de><div class="items" data-v-5a8eb3de><!--[--><!--[--><div class="menu-link" data-v-5a8eb3de data-v-95ebb6bf><a class="auto-link link" href="/notes/books/IELTS/l2ygtlzs/" data-v-95ebb6bf data-v-627b18c0><!--[--><!----><i data-v-95ebb6bf>IELTS</i><!--]--><!----></a></div><!--]--><!--[--><div class="menu-link" data-v-5a8eb3de data-v-95ebb6bf><a class="auto-link link" href="/notes/books/history/i8tnm81o/" data-v-95ebb6bf data-v-627b18c0><!--[--><!----><i data-v-95ebb6bf>history</i><!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><!----><div class="navbar-appearance appearance" data-v-b90f6f00 data-v-e39806d8><button class="switch-wrapper switch-appearance" type="button" role="switch" title="切换为深色主题" aria-checked="false" data-v-e39806d8 data-v-ef1bbd4d data-v-1491729c><span class="check" data-v-1491729c><span class="icon" data-v-1491729c><!--[--><span class="vpi-sun sun" data-v-ef1bbd4d></span><span class="vpi-moon moon" data-v-ef1bbd4d></span><!--]--></span></span></button></div><!----><div class="flyout-wrapper navbar-extra extra" data-v-b90f6f00 data-v-ce62e2da data-v-09d7116b><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-09d7116b><span class="vpi-more-horizontal icon" data-v-09d7116b></span></button><div class="menu" data-v-09d7116b><div class="menu-wrapper" data-v-09d7116b data-v-5a8eb3de><!----><!--[--><!--[--><!----><div class="group" data-v-ce62e2da><div class="item appearance" data-v-ce62e2da><p class="label" data-v-ce62e2da>外观</p><div class="appearance-action" data-v-ce62e2da><button class="switch-wrapper switch-appearance" type="button" role="switch" title="切换为深色主题" aria-checked="false" data-v-ce62e2da data-v-ef1bbd4d data-v-1491729c><span class="check" data-v-1491729c><span class="icon" data-v-1491729c><!--[--><span class="vpi-sun sun" data-v-ef1bbd4d></span><span class="vpi-moon moon" data-v-ef1bbd4d></span><!--]--></span></span></button></div></div></div><!----><!--]--><!--]--></div></div></div><button type="button" class="navbar-hamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="nav-screen" data-v-b90f6f00 data-v-82b160ec><span class="container" data-v-82b160ec><span class="top" data-v-82b160ec></span><span class="middle" data-v-82b160ec></span><span class="bottom" data-v-82b160ec></span></span></button></div></div></div></div><!----></div><div class="local-nav reached-top" data-v-787f3e07 data-v-7abd47b5><button class="menu" aria-expanded="false" aria-controls="SidebarNav" data-v-7abd47b5><span class="vpi-align-left menu-icon" data-v-7abd47b5></span><span class="menu-text" data-v-7abd47b5>Menu</span></button><div class="local-nav-outline-dropdown" style="--vp-vh:0px;" data-v-7abd47b5 data-v-758aa5fc><button class="" data-v-758aa5fc>此页内容 <span class="vpi-chevron-right icon" data-v-758aa5fc></span></button><!----></div></div><aside class="sidebar-wrapper" data-v-787f3e07 data-v-cd7b9af5><div class="curtain" data-v-cd7b9af5></div><nav id="SidebarNav" class="nav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-cd7b9af5><span id="sidebar-aria-label" class="visually-hidden" data-v-cd7b9af5> Sidebar Navigation </span><!--[--><div class="group" data-v-cd7b9af5><section class="sidebar-item level-0 collapsible has-active" data-v-cd7b9af5 data-v-529cd448><div class="item" role="button" tabindex="0" data-v-529cd448><div class="indicator" data-v-529cd448></div><!----><h2 class="text" data-v-529cd448>JavaScript</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-529cd448><span class="vpi-chevron-right caret-icon" data-v-529cd448></span></div></div><div class="items" data-v-529cd448><!--[--><div class="sidebar-item level-1 is-link" data-v-529cd448 data-v-529cd448><div class="item" tabindex="0" data-v-529cd448><div class="indicator" data-v-529cd448></div><!----><a class="auto-link link link" href="/notes/Re-learning/JavaScript/kjla8iv9/" data-v-529cd448 data-v-627b18c0><!--[--><p class="text" data-v-529cd448>01.let、var、const的区别</p><!--]--><!----></a><!----></div><!----></div><div class="sidebar-item level-1 is-link" data-v-529cd448 data-v-529cd448><div class="item" tabindex="0" data-v-529cd448><div class="indicator" data-v-529cd448></div><!----><a class="auto-link link link" href="/notes/Re-learning/JavaScript/ndqgsvhr/" data-v-529cd448 data-v-627b18c0><!--[--><p class="text" data-v-529cd448>02.JS中的数据类型</p><!--]--><!----></a><!----></div><!----></div><div class="sidebar-item level-1 is-link" data-v-529cd448 data-v-529cd448><div class="item" tabindex="0" data-v-529cd448><div class="indicator" data-v-529cd448></div><!----><a class="auto-link link link" href="/notes/Re-learning/JavaScript/hgyj7gpv/" data-v-529cd448 data-v-627b18c0><!--[--><p class="text" data-v-529cd448>03.包装类型</p><!--]--><!----></a><!----></div><!----></div><div class="sidebar-item level-1 is-link" data-v-529cd448 data-v-529cd448><div class="item" tabindex="0" data-v-529cd448><div class="indicator" data-v-529cd448></div><!----><a class="auto-link link link" href="/notes/Re-learning/JavaScript/5bby2534/" data-v-529cd448 data-v-627b18c0><!--[--><p class="text" data-v-529cd448>04.数据类型的转换</p><!--]--><!----></a><!----></div><!----></div><div class="sidebar-item level-1 is-link" data-v-529cd448 data-v-529cd448><div class="item" tabindex="0" data-v-529cd448><div class="indicator" data-v-529cd448></div><!----><a class="auto-link link link" href="/notes/Re-learning/JavaScript/56q0u2h3/" data-v-529cd448 data-v-627b18c0><!--[--><p class="text" data-v-529cd448>05.运算符</p><!--]--><!----></a><!----></div><!----></div><div class="sidebar-item level-1 is-link" data-v-529cd448 data-v-529cd448><div class="item" tabindex="0" data-v-529cd448><div class="indicator" data-v-529cd448></div><!----><a class="auto-link link link" href="/notes/Re-learning/JavaScript/0r7dnyvg/" data-v-529cd448 data-v-627b18c0><!--[--><p class="text" data-v-529cd448>06.原型链</p><!--]--><!----></a><!----></div><!----></div><div class="sidebar-item level-1 is-link" data-v-529cd448 data-v-529cd448><div class="item" tabindex="0" data-v-529cd448><div class="indicator" data-v-529cd448></div><!----><a class="auto-link link link" href="/notes/Re-learning/JavaScript/v4k135sg/" data-v-529cd448 data-v-627b18c0><!--[--><p class="text" data-v-529cd448>07.执行栈和执行上下文</p><!--]--><!----></a><!----></div><!----></div><div class="sidebar-item level-1 is-link" data-v-529cd448 data-v-529cd448><div class="item" tabindex="0" data-v-529cd448><div class="indicator" data-v-529cd448></div><!----><a class="auto-link link link" href="/notes/Re-learning/JavaScript/z1vy62ki/" data-v-529cd448 data-v-627b18c0><!--[--><p class="text" data-v-529cd448>08.作用域和作用域链</p><!--]--><!----></a><!----></div><!----></div><div class="sidebar-item level-1 is-link" data-v-529cd448 data-v-529cd448><div class="item" tabindex="0" data-v-529cd448><div class="indicator" data-v-529cd448></div><!----><a class="auto-link link link" href="/notes/Re-learning/JavaScript/j3y1ef31/" data-v-529cd448 data-v-627b18c0><!--[--><p class="text" data-v-529cd448>09.this指向</p><!--]--><!----></a><!----></div><!----></div><div class="sidebar-item level-1 is-link" data-v-529cd448 data-v-529cd448><div class="item" tabindex="0" data-v-529cd448><div class="indicator" data-v-529cd448></div><!----><a class="auto-link link link" href="/notes/Re-learning/JavaScript/yhhhzs4j/" data-v-529cd448 data-v-627b18c0><!--[--><p class="text" data-v-529cd448>10.垃圾回收与内存泄漏</p><!--]--><!----></a><!----></div><!----></div><div class="sidebar-item level-1 is-link" data-v-529cd448 data-v-529cd448><div class="item" tabindex="0" data-v-529cd448><div class="indicator" data-v-529cd448></div><!----><a class="auto-link link link" href="/notes/Re-learning/JavaScript/z0k67wn3/" data-v-529cd448 data-v-627b18c0><!--[--><p class="text" data-v-529cd448>11.闭包</p><!--]--><!----></a><!----></div><!----></div><div class="sidebar-item level-1 is-link" data-v-529cd448 data-v-529cd448><div class="item" tabindex="0" data-v-529cd448><div class="indicator" data-v-529cd448></div><!----><a class="auto-link link link" href="/notes/Re-learning/JavaScript/31zlgh1r/" data-v-529cd448 data-v-627b18c0><!--[--><p class="text" data-v-529cd448>12.DOM 事件的注册和移除</p><!--]--><!----></a><!----></div><!----></div><div class="sidebar-item level-1 is-link" data-v-529cd448 data-v-529cd448><div class="item" tabindex="0" data-v-529cd448><div class="indicator" data-v-529cd448></div><!----><a class="auto-link link link" href="/notes/Re-learning/JavaScript/17ehztt2/" data-v-529cd448 data-v-627b18c0><!--[--><p class="text" data-v-529cd448>13.DOM 事件的传播机制</p><!--]--><!----></a><!----></div><!----></div><div class="sidebar-item level-1 is-link" data-v-529cd448 data-v-529cd448><div class="item" tabindex="0" data-v-529cd448><div class="indicator" data-v-529cd448></div><!----><a class="auto-link link link" href="/notes/Re-learning/JavaScript/jnzlv2qg/" data-v-529cd448 data-v-627b18c0><!--[--><p class="text" data-v-529cd448>14.阻止事件默认行为</p><!--]--><!----></a><!----></div><!----></div><div class="sidebar-item level-1 is-link" data-v-529cd448 data-v-529cd448><div class="item" tabindex="0" data-v-529cd448><div class="indicator" data-v-529cd448></div><!----><a class="auto-link link link" href="/notes/Re-learning/JavaScript/6mmqgyw8/" data-v-529cd448 data-v-627b18c0><!--[--><p class="text" data-v-529cd448>15.递归</p><!--]--><!----></a><!----></div><!----></div><div class="sidebar-item level-1 is-link" data-v-529cd448 data-v-529cd448><div class="item" tabindex="0" data-v-529cd448><div class="indicator" data-v-529cd448></div><!----><a class="auto-link link link" href="/notes/Re-learning/JavaScript/4vhsy4s1/" data-v-529cd448 data-v-627b18c0><!--[--><p class="text" data-v-529cd448>16.属性描述符</p><!--]--><!----></a><!----></div><!----></div><div class="sidebar-item level-1 is-link" data-v-529cd448 data-v-529cd448><div class="item" tabindex="0" data-v-529cd448><div class="indicator" data-v-529cd448></div><!----><a class="auto-link link link" href="/notes/Re-learning/JavaScript/y4xno2r7/" data-v-529cd448 data-v-627b18c0><!--[--><p class="text" data-v-529cd448>17.class和构造函数区别</p><!--]--><!----></a><!----></div><!----></div><div class="sidebar-item level-1 is-link" data-v-529cd448 data-v-529cd448><div class="item" tabindex="0" data-v-529cd448><div class="indicator" data-v-529cd448></div><!----><a class="auto-link link link" href="/notes/Re-learning/JavaScript/bhkyfoo0/" data-v-529cd448 data-v-627b18c0><!--[--><p class="text" data-v-529cd448>18.浮点数精度问题</p><!--]--><!----></a><!----></div><!----></div><div class="sidebar-item level-1 is-link" data-v-529cd448 data-v-529cd448><div class="item" tabindex="0" data-v-529cd448><div class="indicator" data-v-529cd448></div><!----><a class="auto-link link link" href="/notes/Re-learning/JavaScript/bx6bpgcl/" data-v-529cd448 data-v-627b18c0><!--[--><p class="text" data-v-529cd448>19.严格模式</p><!--]--><!----></a><!----></div><!----></div><div class="sidebar-item level-1 is-link" data-v-529cd448 data-v-529cd448><div class="item" tabindex="0" data-v-529cd448><div class="indicator" data-v-529cd448></div><!----><a class="auto-link link link" href="/notes/Re-learning/JavaScript/kh1arj3w/" data-v-529cd448 data-v-627b18c0><!--[--><p class="text" data-v-529cd448>20.函数防抖和节流</p><!--]--><!----></a><!----></div><!----></div><div class="sidebar-item level-1 is-link" data-v-529cd448 data-v-529cd448><div class="item" tabindex="0" data-v-529cd448><div class="indicator" data-v-529cd448></div><!----><a class="auto-link link link" href="/notes/Re-learning/JavaScript/89uxh7df/" data-v-529cd448 data-v-627b18c0><!--[--><p class="text" data-v-529cd448>21.WeakSet 和 WeakMap</p><!--]--><!----></a><!----></div><!----></div><div class="sidebar-item level-1 is-link" data-v-529cd448 data-v-529cd448><div class="item" tabindex="0" data-v-529cd448><div class="indicator" data-v-529cd448></div><!----><a class="auto-link link link" href="/notes/Re-learning/JavaScript/067nociv/" data-v-529cd448 data-v-627b18c0><!--[--><p class="text" data-v-529cd448>深浅拷贝</p><!--]--><!----></a><!----></div><!----></div><div class="sidebar-item level-1 is-link" data-v-529cd448 data-v-529cd448><div class="item" tabindex="0" data-v-529cd448><div class="indicator" data-v-529cd448></div><!----><a class="auto-link link link" href="/notes/Re-learning/JavaScript/5kkx14h1/" data-v-529cd448 data-v-627b18c0><!--[--><p class="text" data-v-529cd448>23.函数柯里化</p><!--]--><!----></a><!----></div><!----></div><div class="sidebar-item level-1 is-link" data-v-529cd448 data-v-529cd448><div class="item" tabindex="0" data-v-529cd448><div class="indicator" data-v-529cd448></div><!----><a class="auto-link link link" href="/notes/Re-learning/JavaScript/31uiui9s/" data-v-529cd448 data-v-627b18c0><!--[--><p class="text" data-v-529cd448>24.Node的事件循环</p><!--]--><!----></a><!----></div><!----></div><div class="sidebar-item level-1 is-link" data-v-529cd448 data-v-529cd448><div class="item" tabindex="0" data-v-529cd448><div class="indicator" data-v-529cd448></div><!----><a class="auto-link link link" href="/notes/Re-learning/JavaScript/zth732pv/" data-v-529cd448 data-v-627b18c0><!--[--><p class="text" data-v-529cd448>25.eval</p><!--]--><!----></a><!----></div><!----></div><div class="sidebar-item level-1 is-link" data-v-529cd448 data-v-529cd448><div class="item" tabindex="0" data-v-529cd448><div class="indicator" data-v-529cd448></div><!----><a class="auto-link link link" href="/notes/Re-learning/JavaScript/v7sm29wo/" data-v-529cd448 data-v-627b18c0><!--[--><p class="text" data-v-529cd448>26.尺寸和位置</p><!--]--><!----></a><!----></div><!----></div><div class="sidebar-item level-1 is-link" data-v-529cd448 data-v-529cd448><div class="item" tabindex="0" data-v-529cd448><div class="indicator" data-v-529cd448></div><!----><a class="auto-link link link" href="/notes/Re-learning/JavaScript/zhd8gnzy/" data-v-529cd448 data-v-627b18c0><!--[--><p class="text" data-v-529cd448>javascript 面试题汇总</p><!--]--><!----></a><!----></div><!----></div><div class="sidebar-item level-1 is-link" data-v-529cd448 data-v-529cd448><div class="item" tabindex="0" data-v-529cd448><div class="indicator" data-v-529cd448></div><!----><a class="auto-link link link" href="/notes/Re-learning/JavaScript/m0ftpqt1/" data-v-529cd448 data-v-627b18c0><!--[--><p class="text" data-v-529cd448>更多知识</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section></div><!--]--></nav></aside><div id="LayoutContent" class="layout-content has-sidebar external-link-icon-enabled" data-v-787f3e07 data-v-62a24bea><!--[--><div class="has-sidebar has-aside plume-page" data-v-11beb29e><div class="container" data-v-11beb29e><div class="aside" data-v-11beb29e><div class="aside-container" data-v-11beb29e><div class="aside-content" data-v-11beb29e><div class="page-aside" data-v-11beb29e data-v-ead5c4dd><div class="has-outline page-aside-outline" data-v-ead5c4dd><div class="content" data-v-ead5c4dd><div class="outline-marker" data-v-ead5c4dd></div><div class="outline-title" data-v-ead5c4dd><span data-v-ead5c4dd>此页内容</span><span class="vpi-print icon" data-v-ead5c4dd></span></div><nav aria-labelledby="doc-outline-aria-label" data-v-ead5c4dd><span id="doc-outline-aria-label" class="visually-hidden" data-v-ead5c4dd> Table of Contents for current page </span><ul class="root" data-v-ead5c4dd data-v-f0811d96><!--[--><li data-v-f0811d96><a class="outline-link" href="#经典真题" data-v-f0811d96>经典真题</a><!----></li><li data-v-f0811d96><a class="outline-link" href="#什么是内存泄露" data-v-f0811d96>什么是内存泄露</a><!----></li><li data-v-f0811d96><a class="outline-link" href="#javascript-中的垃圾回收" data-v-f0811d96>JavaScript 中的垃圾回收</a><!----></li><li data-v-f0811d96><a class="outline-link" href="#标记清除" data-v-f0811d96>标记清除</a><!----></li><li data-v-f0811d96><a class="outline-link" href="#引用计数" data-v-f0811d96>引用计数</a><!----></li><li data-v-f0811d96><a class="outline-link" href="#真题解答" data-v-f0811d96>真题解答</a><!----></li><!--]--></ul></nav></div></div></div></div></div></div><div class="content" data-v-11beb29e><div class="content-container" data-v-11beb29e><!--[--><!----><h1 class="page-title" data-v-2ddb9416>10.垃圾回收与内存泄漏</h1><div class="page-meta-wrapper" data-v-2ddb9416><!----><p class="reading-time" data-v-2ddb9416><span class="vpi-books icon" data-v-2ddb9416></span><span data-v-2ddb9416>1998字</span><span data-v-2ddb9416>约7分钟</span></p><!----><p class="create-time" data-v-2ddb9416><span class="vpi-clock icon" data-v-2ddb9416></span><span data-v-2ddb9416>2024-05-22</span></p></div><!--]--><!--[--><div class="plume-content" data-v-11beb29e><h1 id="垃圾回收与内存泄漏" tabindex="-1"><a class="header-anchor" href="#垃圾回收与内存泄漏"><span>垃圾回收与内存泄漏</span></a></h1><h2 id="经典真题" tabindex="-1"><a class="header-anchor" href="#经典真题"><span>经典真题</span></a></h2><ul><li>请介绍一下 <em>JavaScript</em> 中的垃圾回收站机制</li></ul><h2 id="什么是内存泄露" tabindex="-1"><a class="header-anchor" href="#什么是内存泄露"><span>什么是内存泄露</span></a></h2><p>程序的运行需要内存。只要程序提出要求，操作系统或者运行时（<em>runtime</em>）就必须供给内存。</p><p>对于持续运行的服务进程（<em>daemon</em>），必须及时释放不再用到的内存。否则，内存占用越来越高，轻则影响系统性能，重则导致进程崩溃。</p><p>也就是说，不再用到的内存，如果没有及时释放，就叫做内存泄漏（<em>memory leak</em>）。</p><h2 id="javascript-中的垃圾回收" tabindex="-1"><a class="header-anchor" href="#javascript-中的垃圾回收"><span><em>JavaScript</em> 中的垃圾回收</span></a></h2><p>浏览器的 <em>Javascript</em> 具有自动垃圾回收机制（<em>GC</em>：<em>Garbage Collecation</em>），也就是说，执行环境会负责管理代码执行过程中使用的内存。其原理是：<strong>垃圾收集器会定期（周期性）找出那些不在继续使用的变量，然后释放其内存</strong>。</p><p>但是这个过程不是实时的，因为其开销比较大并且 <em>GC</em> 时停止响应其他操作，所以垃圾回收器会按照固定的时间间隔周期性的执行。</p><p>不再使用的变量也就是生命周期结束的变量，当然只可能是局部变量，全局变量的生命周期直至浏览器卸载页面才会结束。局部变量只在函数的执行过程中存在，而在这个过程中会为局部变量在栈或堆上分配相应的空间，以存储它们的值，然后在函数中使用这些变量，直至函数结束，而闭包中由于内部函数的原因，外部函数并不能算是结束。</p><p>下面是一段示例代码：</p><div class="language-js line-numbers-mode" data-ext="js" data-title="js"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">function</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> fn1</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    var</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> obj</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B5695999;--shiki-dark:#C98A7D99;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">zhangsan</span><span style="--shiki-light:#B5695999;--shiki-dark:#C98A7D99;">&#39;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> age</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 10</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">};</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">function</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> fn2</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    var</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> obj</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B5695999;--shiki-dark:#C98A7D99;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">zhangsan</span><span style="--shiki-light:#B5695999;--shiki-dark:#C98A7D99;">&#39;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> age</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 10</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">};</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">    return</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> obj</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">var</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> a</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> fn1</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">var</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> b</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> fn2</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在上面的代码中，我们首先声明了两个函数，分别叫做 <em>fn1</em> 和 <em>fn2</em>。</p><p>当 <em>fn1</em> 被调用时，进入 <em>fn1</em> 的环境，会开辟一块内存存放对象 <em>{name: &#39;zhangsan&#39;, age: 10}</em>。而当调用结束后，出了 <em>fn1</em> 的环境，那么该块内存会被 <em>JavaScript</em> 引擎中的垃圾回收器自动释放；</p><p>在 <em>fn2</em> 被调用的过程中，返回的对象被全局变量 <em>b</em> 所指向，所以该块内存并不会被释放。</p><p>这里问题就出现了：到底哪个变量是没有用的？</p><p>所以垃圾收集器必须跟踪到底哪个变量没用，对于不再有用的变量打上标记，以备将来收回其内存。</p><p>用于标记的无用变量的策略可能因实现而有所区别，通常情况下有两种实现方式：<strong>标记清除</strong>和<strong>引用计数</strong>。</p><p>引用计数不太常用，标记清除较为常用。</p><h2 id="标记清除" tabindex="-1"><a class="header-anchor" href="#标记清除"><span>标记清除</span></a></h2><p><em>JavaScript</em> 中最常用的垃圾回收方式就是标记清除。</p><p>当变量进入环境时，例如，在函数中声明一个变量，就将这个变量标记为“进入环境”。</p><p>从逻辑上讲，永远不能释放进入环境的变量所占用的内存，因为只要执行流进入相应的环境，就可能会用到它们。</p><p>而当变量离开环境时，则将其标记为“离开环境”。</p><div class="language-js line-numbers-mode" data-ext="js" data-title="js"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">function</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> test</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(){</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">  var</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> a</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 10</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // 被标记 ，进入环境 </span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">  var</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> b</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 20</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // 被标记 ，进入环境</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">test</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // 执行完毕 之后 a、b 又被标离开环境，被回收。</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>垃圾回收器在运行的时候会给存储在内存中的所有变量都加上标记（当然，可以使用任何标记方式）。</p><p>然后，它会去掉环境中的变量以及被环境中的变量引用的变量的标记（闭包）。而在此之后再被加上标记的变量将被视为准备删除的变量，原因是环境中的变量已经无法访问到这些变量了。</p><p>最后，垃圾回收器完成内存清除工作，销毁那些带标记的值并回收它们所占用的内存空间。</p><p>到目前为止，<em>IE9+、Firefox、Opera、Chrome、Safari</em> 的 <em>JS</em> 实现使用的都是标记清除的垃圾回收策略或类似的策略，只不过垃圾收集的时间间隔互不相同。</p><h2 id="引用计数" tabindex="-1"><a class="header-anchor" href="#引用计数"><span>引用计数</span></a></h2><p>引用计数的含义是跟踪记录每个值被引用的次数。</p><p>当声明了一个变量并将一个引用类型值赋给该变量时，则这个值的引用次数就是 <em>1</em>。如果同一个值又被赋给另一个变量，则该值的引用次数加 <em>1</em>。</p><p>相反，如果包含对这个值引用的变量又取得了另外一个值，则这个值的引用次数减 <em>1</em>。当这个值的引用次数变成 <em>0</em> 时，则说明没有办法再访问这个值了，因而就可以将其占用的内存空间回收回来。</p><p>这样，当垃圾回收器下次再运行时，它就会释放那些引用次数为 <em>0</em> 的值所占用的内存。</p><div class="language-js line-numbers-mode" data-ext="js" data-title="js"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">function</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> test</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    var</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> a</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {};</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">	// a 指向对象的引用次数为 1</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    var</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> b</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> a</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">	// a 指向对象的引用次数加 1，为 2</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    var</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> c</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> a</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">	// a 指向对象的引用次数再加 1，为 3</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    var</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> b</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {};</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">	// a 指向对象的引用次数减 1，为 2</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><em>Netscape Navigator3</em> 是最早使用引用计数策略的浏览器，但很快它就遇到一个严重的问题：<strong>循环引用</strong>。</p><p>循环引用指的是对象 <em>A</em> 中包含一个指向对象B的指针，而对象 <em>B</em> 中也包含一个指向对象 <em>A</em> 的引用。</p><div class="language-js line-numbers-mode" data-ext="js" data-title="js"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">function</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> fn</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    var</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> a</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {};</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    var</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> b</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {};</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    a</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">pro</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> b</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    b</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">pro</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> a</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">fn</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>以上代码 <em>a</em> 和 <em>b</em> 的引用次数都是 <em>2</em>，<em>fn</em> 执行完毕后，两个对象都已经离开环境，在标记清除方式下是没有问题的，但是在引用计数策略下，因为 <em>a</em> 和 <em>b</em> 的引用次数不为 <em>0</em>，所以不会被垃圾回收器回收内存，如果 <em>fn</em> 函数被大量调用，就会造成内存泄露。在 <em>IE7</em> 与 <em>IE8</em> 上，内存直线上升。</p><h2 id="真题解答" tabindex="-1"><a class="header-anchor" href="#真题解答"><span>真题解答</span></a></h2><ul><li>请介绍一下 <em>JavaScript</em> 中的垃圾回收站机制</li></ul><blockquote><p>参考答案：</p><p><em>JavaScript</em> 具有自动垃圾回收机制。垃圾收集器会按照固定的时间间隔周期性的执行。</p><p><em>JavaScript</em> 常见的垃圾回收方式：<strong>标记清除</strong>、<strong>引用计数</strong>方式。</p><p>1、标记清除方式：</p><ul><li><p>工作原理：当变量进入环境时，将这个变量标记为“进入环境”。当变量离开环境时，则将其标记为“离开环境”。标记“离开环境”的就回收内存。</p></li><li><p>工作流程：</p></li><li><p>垃圾回收器，在运行的时候会给存储在内存中的所有变量都加上标记；</p></li><li><p>去掉环境中的变量以及被环境中的变量引用的变量的标记；</p></li><li><p>被加上标记的会被视为准备删除的变量；</p></li><li><p>垃圾回收器完成内存清理工作，销毁那些带标记的值并回收他们所占用的内存空间。</p></li></ul><p>2、引用计数方式：</p><ul><li><p>工作原理：跟踪记录每个值被引用的次数。</p></li><li><p>工作流程：</p></li><li><p>声明了一个变量并将一个引用类型的值赋值给这个变量，这个引用类型值的引用次数就是 <em>1</em>；</p></li><li><p>同一个值又被赋值给另一个变量，这个引用类型值的引用次数加 <em>1</em>；</p></li><li><p>当包含这个引用类型值的变量又被赋值成另一个值了，那么这个引用类型值的引用次数减 <em>1</em>；</p></li><li><p>当引用次数变成 <em>0</em> 时，说明没办法访问这个值了；</p></li><li><p>当垃圾收集器下一次运行时，它就会释放引用次数是 <em>0</em> 的值所占的内存。</p></li></ul></blockquote><p>-<em>EOF</em>-</p></div><footer class="page-footer" data-v-11beb29e data-v-d4424cf2><!----><div class="contributors" data-v-d4424cf2><span class="contributors-label" data-v-d4424cf2>贡献者: </span><span class="contributors-info" data-v-d4424cf2><!--[--><!--[--><span class="contributor" title="email: 1760967618@qq.com" data-v-d4424cf2>Pengshimin</span><!----><!--]--><!--]--></span></div><nav class="prev-next" data-v-d4424cf2><div class="pager" data-v-d4424cf2><a class="auto-link link pager-link prev" href="/notes/Re-learning/JavaScript/j3y1ef31/" data-v-d4424cf2 data-v-627b18c0><!--[--><span class="desc" data-v-d4424cf2>上一页</span><span class="title" data-v-d4424cf2>09.this指向</span><!--]--><!----></a></div><div class="pager" data-v-d4424cf2><a class="auto-link link pager-link next" href="/notes/Re-learning/JavaScript/z0k67wn3/" data-v-d4424cf2 data-v-627b18c0><!--[--><span class="desc" data-v-d4424cf2>下一页</span><span class="title" data-v-d4424cf2>11.闭包</span><!--]--><!----></a></div></nav></footer><!----><!--]--></div></div></div></div><button style="display:none;" type="button" class="back-to-top-button" aria-label="back to top" data-v-787f3e07 data-v-1bface94><span class="percent" data-v-1bface94>0%</span><span class="show icon vpi-back-to-top" data-v-1bface94></span><svg aria-hidden="true" data-v-1bface94><circle cx="50%" cy="50%" style="stroke-dasharray:calc(0% - 12.566370614359172px) calc(314.1592653589793% - 12.566370614359172px);" data-v-1bface94></circle></svg></button><footer class="plume-footer has-sidebar" data-v-787f3e07 data-v-a6b195da><div class="container" data-v-a6b195da><p class="message" data-v-a6b195da>Power by <a target="_blank" href="https://v2.vuepress.vuejs.org/">VuePress</a> & <a target="_blank" href="https://theme-plume.vuejs.press">vuepress-theme-plume</a></p><!----></div></footer><!--]--></div><!--]--></div><!--[--><!--]--><!--]--></div><script type="module" src="/assets/app-0O5GHy7n.js" defer></script></body></html>